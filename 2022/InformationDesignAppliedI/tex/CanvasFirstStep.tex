\documentclass[mingoth,11pt,a4j,uplatex]{jsarticle}
\usepackage[top=20truemm,bottom=20truemm,left=20truemm,right=20truemm]{geometry}
\usepackage{moreverb}
\usepackage{listings,jlisting} %日本語のコメントアウトをする場合jlistingが必要
								% https://qiita.com/N_Matsukiyo/items/1199f07a0e1bf4fce29c

% https://qiita.com/ta_b0_/items/2619d5927492edbb5b03
\lstset{
  basicstyle={\ttfamily},
  identifierstyle={\small},
  commentstyle={\smallitshape},
  keywordstyle={\small\bfseries},
  ndkeywordstyle={\small},
  stringstyle={\small\ttfamily},
  frame={tb},
  breaklines=true,
  columns=[l]{fullflexible},
  numbers=left,
  xrightmargin=0zw,
  xleftmargin=3zw,
  numberstyle={\scriptsize},
  stepnumber=1,
  numbersep=1zw,
  lineskip=-0.5ex
}


\renewenvironment{description}%  descriptionをインデント
{%
   \begin{list}{\parbox{1zw}{$\bullet$}}% 見出し記号／直後の空白を調節
   {%
      \setlength{\topsep}{1zh}
      \setlength{\itemindent}{3zw}
      \setlength{\leftmargin}{5zw}%  左のインデント
      \setlength{\rightmargin}{0zw}% 右のインデント
      \setlength{\labelsep}{1zw}%    黒丸と説明文の間
      \setlength{\labelwidth}{3zw}%  ラベルの幅
      \setlength{\itemsep}{0em}%     項目ごとの改行幅
      \setlength{\parsep}{0em}%      段落での改行幅
      \setlength{\listparindent}{0zw}% 段落での一字下り
   }
}{%
   \end{list}%
}

\title{Canvas First Step}
\author{小林　統 \thanks{帝京平成大学現代ライフ学部人間文化学科メディア文化コース}}
\date{\today}

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\begin{document}
%\gtfamily	%全てゴシックに

\maketitle

\begin{abstract}
HTML5のCanvasの機能を利用して、ホームページに絵を描いたり、アニメーションを作ったりしてみよう。
\end{abstract}

\tableofcontents
\newpage

\section{はじめに}
\subsection{読み間違えないでね}

\begin{lstlisting}[caption=読み間違えないでね]
数字：0123456789
小文字：abcdefghijklmnopqrstuvwxyz
大文字：ABCDEFGHIJKLMNOPQRSTUVWXYZ

1：イチ
l：小文字のエル
i：小文字のアイ
!：ビックリマーク
|：バーティカルバー。Shiftと￥を押したもの。

0：ゼロ
o：小文字のオー
O：大文字のオー

.：ピリオド
,：コンマ
\end{lstlisting}

\subsection{注意}
\begin{itemize}
\item これから出てくるソースコードには、左に「行番号」と呼ばれる番号が出てくるけど、入力する必要ないからね。

\item scriptタグの中で「//」で始まる文は、コメントで、プログラムは読み飛ばすよ。

\item コピーできるところはコピーして効率よく入力して行こう
\item 徐々に追加されていくから、量が多く見えるけど、平気だよ！
\end{itemize}

\subsection{コンピュータの2Dの座標について}
数学では、右にx,上にyだったけど、

コンピュータでは、左上が原点、右にx,下にyと考えるので、気をつけよう。

\newpage
\section{Canvas入門}
\subsection{03-001.html　長方形を描こう}
最初のこれを間違えると、この後、全滅するから、まずは落ち着いて、これをこなそう。

\begin{lstlisting}[caption=長方形を描こう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
			}
			
			function draw(){
				//長方形の描画
				ctx.fillRect(10,10,50,50);	//左上のx,y座標,幅,高さ
			}
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-002.html　長方形に色を塗ろう}
33行目あたりが増えてるね
\begin{lstlisting}[caption=長方形に色を塗ろう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
			}
			
			function draw(){
				//塗の色を設定
				ctx.fillStyle = "rgba(255,0,0,1)";
				
				//長方形の描画
				ctx.fillRect(10,10,50,50);	//左上のx,y座標,幅,高さ
			}
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-003.html　リロードする度にランダムな長方形を描こう}
42行目になんか関数が増えてるよ。

0-numまでのランダムな数値(整数)を返すよ。

Math.random()は0〜1までの乱数。

Math.floor()は小数点以下切り捨て

それを受けて、37行目が変わってるよ。
\begin{lstlisting}[caption=リロードする度にランダムな長方形を描こう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
			}
			
			function draw(){
				//塗の色を設定
				ctx.fillStyle = "rgba(255,0,0,1)";
				
				//長方形の描画
				ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-004.html　リロードする度に色違いのランダムな長方形を描こう}
45行目にからfunctionが２つ増えているね。

getRandomColorは0-255の乱数。R,G,Bに使えるね。

getRandomAlphaは0-1の乱数で透明度だね。

それを受けて、34行目が変わってるよ。
\begin{lstlisting}[caption=リロードする度に色違いのランダムな長方形を描こう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
			}
			
			function draw(){
				//塗の色を設定
				ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
				
				//長方形の描画
				ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-005.html　一定時間ごとにランダムな長方形を描こう}
32行目の表記が変わってるよ。

一定時間おき(この場合は200msec=0.2秒)ごとに、draw関数を呼び出しているよ。

\begin{lstlisting}[caption=一定時間ごとにランダムな長方形を描こう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);

			}
			
			function draw(){
				//塗の色を設定
				ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
				
				//長方形の描画
				ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-006.html　一定時間ごとにランダムな長方形を追加しよう}
37行目辺りに、白い長方形を透明度0.3で描く処理が加わっているよ。

\begin{lstlisting}[caption=一定時間ごとにランダムな長方形を追加しよう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,0.3)";
				ctx.fillRect(0,0,cw,ch);
				
				//塗の色を設定
				ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
				
				//長方形の描画
				ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-007.html　全体の透明度を設定してみる}
28行目に全体の透明度を設定しているよ。色が柔らかくなるね。

\begin{lstlisting}[caption=全体の透明度を設定してみる]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				//全体の透明度を設定
				ctx.globalAlpha = 0.5;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,0.3)";
				ctx.fillRect(0,0,cw,ch);
				
				//塗の色を設定
				ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
				
				//長方形の描画
				ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-008.html　複数の長方形を描いてアニメーションする}
13行目に、ループする回数。

45行目辺りに、ループ処理を描くことによって、1回に複数の長方形を描くようにしてるよ。
\begin{lstlisting}[caption=　複数の長方形を描いてアニメーションする]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			//ループする回数
			const loopNum = 100;	
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				//全体の透明度を設定
				ctx.globalAlpha = 0.5;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//処理をループ
				for (let i=0;i<loopNum;i++){
					//塗の色を設定
					ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					
					//長方形の描画
					ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));
				}

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-009.html　線を描いてみよう}
47行目あたりで線の色を設定

53行目は一旦長方形の描画はコメントアウトして止めてる

55行目から直線を引いてみてるよ。

\begin{lstlisting}[caption=線を描いてみよう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			//ループする回数
			const loopNum = 100;	
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				//全体の透明度を設定
				ctx.globalAlpha = 0.5;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//処理をループ
				for (let i=0;i<loopNum;i++){
					//線の色を設定
					ctx.strokeStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					//塗の色を設定
					ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					
					//長方形の描画
					//ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));
					
					//線の描画
					ctx.beginPath();
					ctx.moveTo(getRandomNum(cw),getRandomNum(ch));
					ctx.lineTo(getRandomNum(cw),getRandomNum(ch));
					ctx.stroke();

				}

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-010.html　円を描いてみよう}
56行目あたりを一度全部コメントアウト

61行目あたりから円を描いているよ。
\begin{lstlisting}[caption=円を描いてみよう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			//ループする回数
			const loopNum = 100;	
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				//全体の透明度を設定
				ctx.globalAlpha = 0.5;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//処理をループ
				for (let i=0;i<loopNum;i++){
					//線の色を設定
					ctx.strokeStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					//塗の色を設定
					ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					
					//長方形の描画
					//ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));
					
					//線の描画
					//ctx.beginPath();
					//ctx.moveTo(getRandomNum(cw),getRandomNum(ch));
					//ctx.lineTo(getRandomNum(cw),getRandomNum(ch));
					//ctx.stroke();
					
					//円の描画
					ctx.beginPath();
					ctx.arc(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw/2),0,360/180*Math.PI,true);
					ctx.stroke();


				}

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-011.html　塗りつぶされた円を追加してみよう}
64行目を一度コメントアウト

65行目で円を塗ってるよ。
\begin{lstlisting}[caption=塗りつぶされた円を追加してみよう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			//ループする回数
			const loopNum = 100;	
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				//全体の透明度を設定
				ctx.globalAlpha = 0.5;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//処理をループ
				for (let i=0;i<loopNum;i++){
					//線の色を設定
					ctx.strokeStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					//塗の色を設定
					ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					
					//長方形の描画
					//ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw),getRandomNum(ch));
					
					//線の描画
					//ctx.beginPath();
					//ctx.moveTo(getRandomNum(cw),getRandomNum(ch));
					//ctx.lineTo(getRandomNum(cw),getRandomNum(ch));
					//ctx.stroke();
					
					//円の描画
					ctx.beginPath();
					ctx.arc(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw/2),0,360/180*Math.PI,true);
					//ctx.stroke();
					ctx.fill();


				}

			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}

		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-012.html　全部のせ！}
線・長方形・円のコメントを外して、全部表示させてみよう。
\begin{lstlisting}[caption=全部のせ！]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			//ループする回数
			const loopNum = 100;	
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//全体の透明度を設定
				ctx.globalAlpha = 0.5;
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);
			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,0.3)";
				ctx.fillRect(0,0,cw,ch);
				
				//処理をループ
				for (let i=0;i<loopNum;i++){
					//ランダムな線の色を設定
					ctx.strokeStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					//ランダムな線の幅を設定
					ctx.lineWidth = getRandomNum(20);
					//ランダムな塗の色を設定
					ctx.fillStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					
					//線の描画
					ctx.beginPath();
					ctx.moveTo(getRandomNum(cw),getRandomNum(ch));
					ctx.lineTo(getRandomNum(cw),getRandomNum(ch));
					ctx.stroke();
					
					
					//長方形の描画
					ctx.fillRect(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw)-cw/2,getRandomNum(ch)-ch/2);
					
					//円の描画
					ctx.beginPath();
					ctx.arc(getRandomNum(cw),getRandomNum(ch),getRandomNum(cw/2),0,360/180*Math.PI,true);
					ctx.fill();
				}
				
			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-013.html　規則的に線を引くことでモアレパターンを作ってみよう}

\begin{description}
\item[モアレ] 規則正しい繰り返し模様を複数重ね合わせたときにそれらの周期のズレにより視覚的に発生する縞模様のこと
\end{description}

ちょっと違うことやってみるよ。

46-54行目のループの中をよくみてね。
\begin{lstlisting}[caption=規則的に線を引くことでモアレパターンを作ってみよう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			//ループする回数
			const loopNum = 255;	
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//全体の透明度を設定
				ctx.globalAlpha = 0.5;
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",200);
			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,0.3)";
				ctx.fillRect(0,0,cw,ch);
				
				//処理をループ
				for (let i=0;i<loopNum;i++){
					//ランダムな線の色を設定
					ctx.strokeStyle = "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")";
					ctx.lineWidth = 1;
					
					//線の描画
					ctx.beginPath();
					ctx.moveTo(i*cw/loopNum,0);
					ctx.lineTo(cw-i*cw/loopNum,ch);
					ctx.stroke();
					
				}
				
			}
			
			//ランダムな数値を返す
			function getRandomNum(num){
				return Math.floor(Math.random()*num);
			}
			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{03-014.html}
できる人は、これまでに学んだことを利用して、何か自分なりのプログラムを作ってみよう。

\flushright{以上}


\end{document}


\newpage
\section{Canvas応用}
入門を受けて、いろんなアニメーション作って行こう

\subsection{物理的な動き}
\subsubsection{03-101.html　円を描こう}
\begin{lstlisting}[caption=円を描こう]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
			}
			
			function draw(){
				//円の描画
				ctx.beginPath();
				ctx.arc(100, 100, 20, 0, 2*Math.PI, false);
				ctx.fillStyle = '#ff0000';
				ctx.fill();
			}
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-102.html　一定時間ごとに円を描くけど...動かない}
\begin{lstlisting}[caption=一定時間ごとに円を描くけど...動かない]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
						
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える 30fpsにするために1000msec/30 = 33msec
				setInterval("draw()",33);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				drawCircle(100, 100, 20, '#FF0000');
			}
			
			function drawCircle(x,y,scale,color){
				//円の描画
				ctx.beginPath();
				ctx.arc(x, y, scale, 0, 2*Math.PI, false);
				ctx.fillStyle = color;
				ctx.fill();
			}
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-103.html　等加速度運動}
\begin{lstlisting}[caption=等加速度運動]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 2;
			let x = 0;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				x += speed;
				drawCircle(x, 100, 20, '#FF0000');
			}
			
			function drawCircle(x,y,scale,color){
				//円の描画
				ctx.beginPath();
				ctx.arc(x, y, scale, 0, 2*Math.PI, false);
				ctx.fillStyle = color;
				ctx.fill();
			}
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-104.html　摩擦のシミュレーション}
\begin{lstlisting}[caption=摩擦のシミュレーション]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				x += (target_x - x) / speed;
				drawCircle(x, 100, 20, '#FF0000');
			}
			
			function drawCircle(x,y,scale,color){
				//円の描画
				ctx.beginPath();
				ctx.arc(x, y, scale, 0, 2*Math.PI, false);
				ctx.fillStyle = color;
				ctx.fill();
			}
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{Particleというオブジェクトを用いた生成方法}
\subsubsection{03-201.html　オブジェクトを利用した等加速度運動}
\begin{lstlisting}[caption=　オブジェクトを利用した等加速度運動]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, speed){
				this.scale = scale;
				this.color = color;
				this.speed = speed;
				this.position = {
					x: 100,
					y: 100
				};
			};
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			
			//パーティクルの準備
			let particle = new Particle(20, "#ff0000", 2);
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				particle.position.x += particle.speed;
				particle.draw();
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-202.html　配列にParticleを入れてアニメーション}
\begin{lstlisting}[caption=配列にParticleを入れてアニメーション]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(6, "#FF0000", Math.random()*(4-2)+2);
					particles[i].position.x = Math.random()*ch;
					particles[i].position.y = Math.random()*cw;
					particles[i].draw();			
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, speed){
				this.scale = scale;
				this.color = color;
				this.speed = speed;
				this.position = {
					x: 100,
					y: 100
				};
			};
			
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].position.x += particles[i].speed;
					particles[i].draw();
					
					if(particles[i].position.x > cw) particles[i].position.x -= cw;			
				}
			}

			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-203.html　色を変更}
\begin{lstlisting}[caption=色を変更]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(6, "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", Math.random()*(4-2)+2);
					particles[i].position.x = Math.random()*ch;
					particles[i].position.y = Math.random()*cw;
					particles[i].draw();			
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, speed){
				this.scale = scale;
				this.color = color;
				this.speed = speed;
				this.position = {
					x: 100,
					y: 100
				};
			};
			
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].position.x += particles[i].speed;
					particles[i].draw();
					
					if(particles[i].position.x > cw) particles[i].position.x -= cw;			
				}
			}

			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-204.html　大きさを変更}
\begin{lstlisting}[caption=大きさを変更]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(getRandomScale(), "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", Math.random()*(4-2)+2);
					particles[i].position.x = Math.random()*ch;
					particles[i].position.y = Math.random()*cw;
					particles[i].draw();			
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);
			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, speed){
				this.scale = scale;
				this.color = color;
				this.speed = speed;
				this.position = {
					x: 100,
					y: 100
				};
			};
			
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].position.x += particles[i].speed;
					particles[i].draw();
					
					if(particles[i].position.x > cw) particles[i].position.x -= cw;			
				}
			}

			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
			function getRandomScale(){
				return (Math.random()*(8-3))+3;
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsection{より高度な表現}
\subsubsection{03-301.html　一定の方向に等加速度運動}
\begin{lstlisting}[caption=一定の方向に等加速度運動]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(getRandomScale(), "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", 5, 1);
					particles[i].position.x = Math.random()*ch;
					particles[i].position.y = Math.random()*cw;
					particles[i].draw();			
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, vx, vy){
				this.scale = scale;
				this.color = color;
				this.vx = vx;
				this.vy = vy;
				this.position = {
					x: 100,
					y: 100
				};
			};
			
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			Particle.prototype.update = function(){
				this.position.x += this.vx;
				this.position.y += this.vy;
				this.draw();
			};
			
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].update();
				}
			}

			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
			function getRandomScale(){
				return (Math.random()*(8-3))+3;
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-302.html　重力のシミュレーション}
\begin{lstlisting}[caption=重力のシミュレーション]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(getRandomScale(), "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", 5, 1, 0.4);
					particles[i].position.x = Math.random()*ch;
					particles[i].position.y = Math.random()*cw;
					particles[i].draw();			
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, vx, vy, gv){
				this.scale = scale;
				this.color = color;
				this.vx = vx;
				this.vy = vy;
				this.gv = gv;
				this.position = {
					x: 100,
					y: 100
				};
			};
			
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			Particle.prototype.update = function(){
				this.vy += this.gv;
				this.position.x += this.vx;
				this.position.y += this.vy;
				this.draw();
			};
			
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].update();
				}
			}

			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
			function getRandomScale(){
				return (Math.random()*(8-3))+3;
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-303.html　床の跳ね返りをシミュレーション}
\begin{lstlisting}[caption=床の跳ね返りをシミュレーション]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(getRandomScale(), "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", 5, 1, 1);
					particles[i].position.x = Math.random()*ch;
					particles[i].position.y = Math.random()*cw;
					particles[i].draw();			
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, vx, vy, gv){
				this.scale = scale;
				this.color = color;
				this.vx = vx;
				this.vy = vy;
				this.gv = gv;
				this.position = {
					x: 100,
					y: 100
				};
			};
			
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			Particle.prototype.update = function(){
				this.vy += this.gv;
				this.position.x += this.vx;
				this.position.y += this.vy;
				this.draw();
				if(this.position.x > cw) this.position.x -= cw;
				if(this.position.y > ch) this.vy = -this.vy;
			};
			
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].update();
				}
			}

			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
			function getRandomScale(){
				return (Math.random()*(8-3))+3;
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-304.html　とある点からの吹き出し}
\begin{lstlisting}[caption=とある点からの吹き出し]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(getRandomScale(), "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", getRandomVelocity(), getRandomVelocity(), 1);
					particles[i].position.x = cw/2;
					particles[i].position.y = ch/4;
					particles[i].draw();			
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, vx, vy, gv){
				this.scale = scale;
				this.color = color;
				this.vx = vx;
				this.vy = vy;
				this.gv = gv;
				this.position = {
					x: 100,
					y: 100
				};
			};
			
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			Particle.prototype.update = function(){
				this.vy += this.gv;
				this.position.x += this.vx;
				this.position.y += this.vy;
				this.draw();
				if(this.position.x > cw) this.position.x -= cw;
				if(this.position.y > ch) this.vy = -this.vy;
			};
			
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].update();
				}
			}

			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
			function getRandomScale(){
				return (Math.random()*(8-3))+3;
			}
			function getRandomVelocity(){
				return Math.random()*20-10;
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-305.html　線の追加}
\begin{lstlisting}[caption=線の追加]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			let density_line = 10;
			let lines = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(getRandomScale(), "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", getRandomVelocity(), getRandomVelocity(), 1);
					particles[i].position.x = cw/2;
					particles[i].position.y = ch/4;
					particles[i].draw();			
				}
				//線の初期化
				for(let j=0;j < density_line; j++){
					lines[j] = new Line(getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),
										getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),
										"rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")",
										getRandomWidth(), 1);
					lines[j].draw();
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, vx, vy, gv){
				this.scale = scale;
				this.color = color;
				this.vx = vx;
				this.vy = vy;
				this.gv = gv;
				this.position = {
					x: 100,
					y: 100
				};
			};
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			Particle.prototype.update = function(){
				this.vy += this.gv;
				this.position.x += this.vx;
				this.position.y += this.vy;
				this.draw();
				if(this.position.x > cw) this.position.x -= cw;
				if(this.position.y > ch) this.vy = -this.vy;
			};
			
			let Line = function(x1, y1, vx1, vy1, x2, y2, vx2, vy2, color, width, gv){
				this.position1 = {x:x1, y:y1};
				this.v1 = {x:vx1, y:vy1};
				this.position2 = {x:x2, y:y2};
				this.v2 = {x:vx2, y:vy2};
				this.color = color;
				this.width = width;
				this.gv = gv;
			};
			Line.prototype.draw = function(){
				ctx.strokeStyle = this.color;
				ctx.lineWidth = this.width;
				ctx.beginPath();
				ctx.moveTo(this.position1.x, this.position1.y);
				ctx.lineTo(this.position2.x, this.position2.y);
				ctx.stroke();
			};
			Line.prototype.update = function(){
				this.v1.y += this.gv;
				this.v2.y += this.gv;
				this.position1.x += this.v1.x;
				this.position1.y += this.v1.y;
				this.position2.x += this.v2.x;
				this.position2.y += this.v2.y;
				this.draw();
				if(this.position1.y > ch) this.v1.y = -this.v1.y;
				if(this.position2.y > ch) this.v2.y = -this.v2.y;
			};
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].update();
				}
				
				//線の描画
				for(let j=0;j < density_line; j++){
					lines[j].update();
				}
			}

			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
			function getRandomScale(){
				return (Math.random()*(8-3))+3;
			}
			function getRandomX(){
				return Math.random()*cw;
			}
			function getRandomY(){
				return Math.random()*ch;
			}
			function getRandomWidth(){
				return Math.random()*10;
			}
			function getRandomVelocity(){
				return Math.random()*20-10;
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}

\subsubsection{03-306.html　三角形の追加}
\begin{lstlisting}[caption=三角形の追加]
<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<script type="text/javascript">
			//canvasの中身を指し示すもの
			let ctx;
			//canvasのwidth 幅
			let cw;
			//canvasのheight 高さ
			let ch;
			
			//移動速度
			let speed = 20;
			let x = 0;
			let target_x = 400;
			
			//パーティクルの準備
			let density = 100; //パーティクルの密度
			let particles = [];
			
			let density_line = 10;
			let lines = [];
			
			let density_tri = 10;
			let tris = [];
			
			//初期化処理
			function init(){
				//IDがmycanvasのものをcanvasという変数にいれておく
				let canvas = document.getElementById('mycanvas');
				//canvasが存在しないか、canvasの中身がなければ処理終了
				if(!canvas ||!canvas.getContext){
					return false;
				}
				
				//canvasの中身を指し示すものを代入
				ctx = canvas.getContext('2d');
				//canvasの幅・高さを代入しておく
				cw = canvas.width;
				ch = canvas.height;
				
				//円の初期化
				for(let i=0;i < density; i++){
					particles[i] = new Particle(getRandomScale(), "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", getRandomVelocity(), getRandomVelocity(), 1);
					particles[i].position.x = cw/2;
					particles[i].position.y = ch/4;
					particles[i].draw();			
				}
				//線の初期化
				for(let j=0;j < density_line; j++){
					lines[j] = new Line(getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),
										getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),
										"rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")",
										getRandomWidth(), 1);
					lines[j].draw();
				}
				//三角形の初期化
				for(let k=0;k<density_tri;k++){
					tris[k] = new TRI(getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),
									getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),
									getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),
									"rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")",
										getRandomWidth(), 1);
					tris[k].draw();
				}
				
				//実際の描画処理
				draw();
				
				//一定時間ごとに書き換える
				setInterval("draw()",33);

			}
			
			//オブジェクト初期化処理
			let Particle = function(scale, color, vx, vy, gv){
				this.scale = scale;
				this.color = color;
				this.vx = vx;
				this.vy = vy;
				this.gv = gv;
				this.position = {
					x: 100,
					y: 100
				};
			};
			Particle.prototype.draw = function() {
				ctx.beginPath();
				ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
				ctx.fillStyle = this.color;
				ctx.fill();
			};
			Particle.prototype.update = function(){
				this.vy += this.gv;
				this.position.x += this.vx;
				this.position.y += this.vy;
				this.draw();
				if(this.position.x > cw) this.position.x -= cw;
				if(this.position.y > ch) this.vy = -this.vy;
			};
			
			let Line = function(x1, y1, vx1, vy1, x2, y2, vx2, vy2, color, width, gv){
				this.position1 = {x:x1, y:y1};
				this.v1 = {x:vx1, y:vy1};
				this.position2 = {x:x2, y:y2};
				this.v2 = {x:vx2, y:vy2};
				this.color = color;
				this.width = width;
				this.gv = gv;
			};
			Line.prototype.draw = function(){
				ctx.strokeStyle = this.color;
				ctx.lineWidth = this.width;
				ctx.beginPath();
				ctx.moveTo(this.position1.x, this.position1.y);
				ctx.lineTo(this.position2.x, this.position2.y);
				ctx.stroke();
			};
			Line.prototype.update = function(){
				this.v1.y += this.gv;
				this.v2.y += this.gv;
				this.position1.x += this.v1.x;
				this.position1.y += this.v1.y;
				this.position2.x += this.v2.x;
				this.position2.y += this.v2.y;
				this.draw();
				if(this.position1.y > ch) this.v1.y = -this.v1.y;
				if(this.position2.y > ch) this.v2.y = -this.v2.y;
			};
			let TRI = function(x1, y1, vx1, vy1, x2, y2, vx2, vy2, x3, y3, vx3, vy3, color, width, gv){
				this.position1 = {x:x1, y:y1};
				this.v1 = {x:vx1, y:vy1};
				this.position2 = {x:x2, y:y2};
				this.v2 = {x:vx2, y:vy2};
				this.position3 = {x:x3, y:y3};
				this.v3 = {x:vx3, y:vy3};
				this.color = color;
				this.width = width;
				this.gv = gv;
			};
			TRI.prototype.draw = function(){
				ctx.strokeStyle = this.color;
				ctx.lineWidth = this.width;
				ctx.beginPath();
				ctx.moveTo(this.position1.x, this.position1.y);
				ctx.lineTo(this.position2.x, this.position2.y);
				ctx.lineTo(this.position3.x, this.position3.y);
				ctx.lineTo(this.position1.x, this.position1.y);
				ctx.stroke();
			};
			TRI.prototype.update = function(){
				this.v1.y += this.gv;
				this.v2.y += this.gv;
				this.v3.y += this.gv;
				this.position1.x += this.v1.x;
				this.position1.y += this.v1.y;
				this.position2.x += this.v2.x;
				this.position2.y += this.v2.y;
				this.position3.x += this.v3.x;
				this.position3.y += this.v3.y;
				this.draw();
				if(this.position1.y > ch) this.v1.y = -this.v1.y;
				if(this.position2.y > ch) this.v2.y = -this.v2.y;
				if(this.position3.y > ch) this.v3.y = -this.v3.y;
			};
			
			function draw(){
				//画面をリセットする
				ctx.fillStyle = "rgba(255,255,255,1)";
				ctx.fillRect(0,0,cw,ch);
				
				//円の描画
				for(let i=0;i < density; i++){
					particles[i].update();
				}
				
				//線の描画
				for(let j=0;j < density_line; j++){
					lines[j].update();
				}
				for(let k=0;k < density_line; k++){
					tris[k].update();
				}
			}

			function getRandomColor(){
				return Math.floor(Math.random()*255);
			}
			function getRandomAlpha(){
				return Math.random();
			}
			function getRandomScale(){
				return (Math.random()*(8-3))+3;
			}
			function getRandomX(){
				return Math.random()*cw;
			}
			function getRandomY(){
				return Math.random()*ch;
			}
			function getRandomWidth(){
				return Math.random()*10;
			}
			function getRandomVelocity(){
				return Math.random()*20-10;
			}
			
		</script>
	</head>
	<body onload="init();">
		<H1>Canvas Test</H1>
		<canvas id="mycanvas" width="1000" height="800"></canvas>
	</body>
</html>
\end{lstlisting}



\flushright{以上}


\end{document}