# メディア表現 VI 13.ノーコード開発III

[メディア表現 VI TOP に戻る](./index.md)

---

## 目次<!-- omit in toc -->

- [メディア表現 VI 13.ノーコード開発III](#メディア表現-vi-13ノーコード開発iii)
  - [今日の流れ](#今日の流れ)
  - [TweetとUserのデータベースを紐付けよう](#tweetとuserのデータベースを紐付けよう)
    - [データベースの拡張](#データベースの拡張)
    - [ユーザ情報とは？](#ユーザ情報とは)
    - [TweetテーブルのUser項目に情報を付加](#tweetテーブルのuser項目に情報を付加)
  - [紐付けによる修正](#紐付けによる修正)
    - [Tweetボタンの処理の変更](#tweetボタンの処理の変更)
    - [index画面の変更](#index画面の変更)
  - [まとめ](#まとめ)

---


## 本日の内容<!-- omit in toc -->
前回,前々回に引き続き

- 【第14回】ノーコード開発III

をやっていきましょう。

---
## 前回,前々回のおさらい<!-- omit in toc -->
.bubbleを利用して、
- Tweetを入力すると表示される
- サインアップ・ログイン・ログアウトできる
- プロフィール登録できる
- ログイン時にアイコンが表示される

の部分まで制作しました。

前回,前々回休みの人は、そこから始めましょう。
残念ながらお金を払わないと本番環境にデプロイ(実際に使える状態にする)ができませんが、その手前までやってみましょう。

機能重視で、あまり見た目にはこだわりません。

---
## 今日の流れ
TODO:
基本は、ユーザをシステムが認識させる機能を作りましょう。

アプリを考えるときに、XD等で遷移を作ったかもしれませんが、ノーコードでは実際にデータベースとの連携になるため、その分は大変になります。

思っているより、大変かもですが、相変わらず、コーディングはゼロとなります。
やっていきましょう。

![](img/bubble02_concept.jpg)

1. サインアップ機能(ページ作成・ワークフロー設定)
2. ログイン機能(ページ作成・ワークフロー設定)
3. ユーザ用のアイコンをindexに追加して、メニュー作成
4. アイコンクリックのメニュー表示非表示設定
5. ログインしていないユーザは強制的にログインページへ
6. プロフィール機能(ページ作成・データベース拡張)



---
## TweetとUserのデータベースを紐付けよう
### データベースの拡張
Tweetにユーザ情報を書き込む項目を追加しましょう。
1. DataタブをクリックしてTweetテーブルを選択
2. Create new Field
3. Field name: User, Field Type: UserでCreate

### ユーザ情報とは？
email, passwordを入力して登録しましたが、どうやってシステムではユーザ情報を管理し、他とは異なる、ということを管理しているのでしょうか？
1. DataタブのApp dataタブを開く
2. All Usersを選択して項目を確認しても、「これが唯一」とわかる項目は見つからない
3. 一つのレコード(データ)の鉛筆をクリックすると「Unique id」が表示されている。これは選択可能だが、編集できない。これがこのデータを唯一のものとしているidとなる
4. Unique idをコピーする

emailで個人を特定できる、という考え方もありますが、(今回実装しませんが)emailの変更に対応できなくなるためUnique id(唯一のID)が必要となります。

### TweetテーブルのUser項目に情報を付加
1. All Tweetsで鉛筆をクリックして、unique idにペーストする
2. 適当に繰り返す(複数ユーザ作っておくと後で検証楽です)

---
## 紐付けによる修正
### Tweetボタンの処理の変更
Tweetした時にUser情報を書き込むように変更仕様
1. Page: indexのWorkflowタブにて「When Button Tweet is clickedのstep1「Create a new Tweet」をクリック
2. 「+ set another field」で User = Current User

これで、自動的にログインしているUserのUnique idがTweetのUser項目に入ります。

### index画面の変更
Repeating Groupのメッセージにメッセージだけでなく、Tweet者のアイコン・名前・メッセージを表示させましょう。

構造は現在
Repeting Group Tweet - Group Tweet - Text Parent group's Tweet
になっているので、Group Tweetの中にアイコン・名前を表示するようにそれぞれ追加してみましょう。

最後くらい自力でできるかな...

previewして動作を確認してみましょう。

---
## まとめ
- コーディングを行わずにアプリ開発をできる環境ができていることが理解できたでしょうか？
- Wordpressもホームページのノーコードツールと言えます。
- でも、ツールがあっても結局人の頭が考えなくてはいけないところがあります。

> 何が問題か？

> どう解決するか？

これを実際に形にするのが開発であり、ノーコードツールであり、この問題自体を解決するものでない、ということは意識しましょう。

来週はこの授業についてまとめて、期末レポート(manabaに掲載済みだけど)を行います。


