---
marp: true
theme: default
size: 16:9
paginate: true
headingDivider: 2
header: メディア表現III 11.エクスプレッション
footer: ""
---

# メディア表現III<!-- omit in toc -->
> 11.エクスプレッション

# 目次<!-- omit in toc -->
1. [エクスプレッション](#エクスプレッション)
   1. [エクスプレッションとは？](#エクスプレッションとは)
2. [実践](#実践)
   1. [time](#time)
   2. [wiggle](#wiggle)
   3. [loopOut](#loopout)
3. [アニメーションプリセット](#アニメーションプリセット)

# 初めに<!-- omit in toc -->

# 前回のおさらい<!-- omit in toc -->

- モーショングラフィックステンプレートの復習
- テキストを用いたモーショングラフィックの制作
- MOGRTとしての書き出し

映像デザイン演習ではなかなか利用しないかもしれませんが、YouTubeやってる人など是非使ってください。

最終課題に、MOGRTの作成は含めます。(ae,mogrtファイルの両方提出)
期末にバタバタしないように、今から作っておいてくれて構いません。

# エクスプレッション

## エクスプレッションとは？

---
### これまでのモーションの付け方
これまで
- キーフレーム
- グラフエディタ

を使ってモーションをつけてきました。

After Effectsにはもう一つ強力な
- エクスプレッション

という機能があります。

---
### キーフレームの大変さ
キーフレーム・グラフエディタを利用すれば、いくらでも好きに動きをコントロールすることができますが、キーフレーム一つずつ作成するのは非常に骨の折れる大変な作業となります。

この作業を簡略化するためにエクスプレッションがあります。キーフレームを入力する代わりにプログラミングしていきます。

---
### エクスプレッションの表記方式
プログラミング言語であるJavaScriptに基づいて記述します。

え、難しそう！と思うかもしれませんが、多様なサンプルがネット上にありますので、最初はコピペから始めると良いでしょう。

---
### エクスプレッションの基本
キーフレームと同様、変化させたいパラメータを選択し、
- 「アニメーション」- 「エクスプレッションの追加」
- パラメータを右クリックで「エクスプレッションの編集」
- ストップウォッチをOption+クリック(WinはALT)
とすることで、エクスプレッションを編集することができるようになります。

プロパティの値が青から赤に変わります。

---
### エクスプレッションのマーク
4つ増えましたが
- ＝：有効((青)・無効
- グラフ：エクスプレッションの値のグラフ表示
- スパイラル：他のパラメータに選択することで、その変数を取り込むことができます。
- 三角メニュー：メニューから利用できる関数・変数を選択できます。

変数？関数？

---
### 初期の式
例えば、「トランスフォーム」「位置」を見ると、「transform.position」と書いてあります。

これが、位置のパラメータを表す”変数”になっています。

---
### 変数とは？
値の入る箱のようなものです。
- 変数
- 関数(値が決まると一定の値を返すもの)
- 数式(加減乗除等)

を組み合わせて、新たな値を設定させます。

---
### 変数で注意すること
位置の場合、2Dならばx,y、3Dならx,y,zの値を取ります。
そのため、返す値を
- [xの値, yの値]
- [xの値, yの値, zの値]

と一緒にしないとエラーが起きてしまいます。

[値1, 値2, 値3, ...]という形式を配列と言います。

---
### Adobe公式
[エクスプレッションの基本](https://helpx.adobe.com/jp/after-effects/using/expression-basics.html)

# 実践

---
### エクスプレッションでできること
関数がたくさんあるため、非常に多くのことができます。
数学好きな人は三角関数など一通りの関数も利用できます。

ですが、そんなこと言うと苦手な人は引いてしまうので、使えるものを使っていきましょう。

---
### 代表的なエクスプレッション
- time
- wiggle
- loopOut

[参考：4つだけ覚えればエクスプレッションマスター！](https://www.youtube.com/watch?v=HEkbATORdaI)

## time

---
### time
時間の話です。
- 回転
- 位置

などに利用できますし、

time % 2

とすることで、2秒のループもできてしまいます。

注：%は剰余で、上記の場合、2で割った余りを指します。

[何にでも使うtimeって何？](https://everydayskillshare.jp/2019/06/21/after-effects%E4%BD%95%E3%81%AB%E3%81%A7%E3%82%82%E4%BD%BF%E3%81%86time%E3%81%A3%E3%81%A6%E4%BD%95%EF%BC%9F/)

---
### 座標軸について
通常の数学では左下、または中央を原点として、右にx,**上にy**となります。

コンピュータの世界では、左上を原点として、右にx,**下にy**となります。

---
### やってみよう Part1
- コンポジションの時間は10秒にしておこう
- シェイプレイヤーで正方形を作る
- 回転のエクスプレッションにtime * 100として回転させてみよう。
- 同じく、time * 200として速度が倍になることを確認しよう.
- time % 1 * 200として1秒でループすることを確認しよう
- 回転のエクスプレッションを無効にしておこう

---
### やってみよう Part2
- 位置のエクスプレッションに[time * 100, time * 100]としてみよう。
- 位置のエクスプレッションに[time * 100, time * 200]としてみよう。
- 位置のエクスプレッションに[time * 100, time % 2 * 200]としてみよう。

---
### やってみようPart3
- 位置のエクスプレッションに
[200 * Math.cos(time)+960, 200 * Math.sin(time)+540]
としてみよう。

これは、説明が必要だろうな...三角関数嫌いにならないで...

## wiggle

---
### wiggle
数値をゆらゆら変動させることができます。

5つパラメータがありますが、
> wiggle(freq,amp)
- freq: 動く速さ
- amp: 動く量

と考えていいでしょう。

[連続した不規則な動き_Wiggle](https://everydayskillshare.jp/2019/05/30/after-effects-%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%97%E3%83%AC%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3wiggle/)

---
### やってみよう Part4
- 回転のエクスプレッションにwiggle(1,200)としてみよう。
- 位置のエクスプレッションにwiggle(1,200)としてみよう。

回転では数値が、位置では要素が二つの配列がwiggleで返ってることがわかります。
これは

> [wiggle(1,200)[0], wiggle(1,200)[1]]

と同じ意味になります。

注：配列という考え方で、0番目から数えることに注意。




## loopOut

---
### loopOut
これは、キーフレームを利用します。
キーフレームでアニメーションを作り、それを繰り返す動かすときに便利なエクスプレッションとなります。4つのタイプがあります。

- cycle
- pingpong
- continue
- offset

[loopOut](https://everydayskillshare.jp/2019/06/06/after-effects-%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%97%E3%83%AC%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3loopout/)

---
### やってみよう Part5
- 位置を0秒で960,540に
- 位置を2秒で1200,640に
- エクスプレッションにloopOut("pingpong")

他のも試してみよう。

---
### まとめ
可能性を感じてくれたでしょうか？
数式次第ではかなり面白い動きを作ることもできます。

向き不向きがあるとは思いますが、是非活用してみてください。


# アニメーションプリセット

---
### アニメーションプリセットとは
アニメーションプリセットを使用すると、キーフレーム、エフェクト、エクスプレッションなどの、レイヤープロパティやアニメーションの特定の構成を保存および再使用することができます。

すごく凝った動きを作った後にそれを再利用することができるということです。

拡張子は「ffx」となります。

---
### アニメーションプリセットの利用方法
利用方法はmogrtと似ています。

- 適用するにはドロップ
- ffxは自分で追加が可能
- 自分で作成したアニメーションを保存も可能

詳しくはこの演習では取り扱いません。
[エフェクトおよびアニメーションプリセットの概要](https://helpx.adobe.com/jp/after-effects/using/effects-animation-presets-overview.html)


# まとめ<!-- omit in TOC -->
エクスプレッションを自分で作成できればさまざまな表現ができます。
頭は多少使うでしょう。でも、キーフレームより楽な場合があります。
エクスプレッションを活用して、表現を広げましょう。


